И мои предложения (в основном, по системе команд):
+1) Поднять скорость UART до 38400 бод - по datasheet это вполне допустимо для 8МГц.
-2) Унифицировать формат времени (6 байт или 4) - 4 байта, т.к. нативно поддерживается в разных системах. Не получится - библиотека DS3231 не умеет выставлять время по unixtime.
+3) Номер станции в заголовок пакета (проверять при приеме пакетов и ругаться, кроме get_status) и исключить его из параметров функций. При ответе так же заполнять номером станции.
+4) Убрать время станции из ответов кроме setTime и getStatus ().
+5) Добавить версию прошивки в ответ getStatus().
+6) Добавить напряжение батареи в ответ getStatus().
+7) Набор команд должен быть одинаковый в разных режимах. Режимы должны влиять только на логику автономной работы станции.
9) ПОСЛЕ ММБ!!! Добавить команду смены BlueThooth PIN: setBtPin(char[16] pin)
10) ПОСЛЕ ММБ!!! Добавить команду смены BlueThooth Name: setBtName(char[32] pin)
+11) Развесистую дичь в writeMasterChip() заменить на тупую запись 16-ти присланных байт в первые 4 страницы карты. Ни к чему городить какие-то выборы в контроллере, если большой брат может сам подготовить комплект данных.
+12) getStationClones() заменить на getCardPages(int startPage, int endPage) - просто сливать постранично дамп памяти с карты и парсить его на большом брате. Мало ли что еще слить понадобится...
+13) добавить температуру часового чипа в getStatus() - может оказаться полезным.
14) ПОСЛЕ ММБ!!! добавить поддержку разных типов карт (Ntag213/15/16). Переключать только при инициализации станции.
15) ПОСЛЕ ММБ!!! добавить параметр "тип_метки" в команду resetStation()
16) ПОСЛЕ ММБ!!! добавить параметр "тип_метки" в ответ getStatus()
17) ПОСЛЕ ММБ!!! добавить размер флэша в ответ getStatus().
18) при изменении маски команды сохранять новую маску в last_checked и заменять ее в карте при очередном поднесении.
19) хранить в памяти 10 последних команд (кольцевой буфер 10 байт на команду: №команды, время отметки, маска).
20) переписать сохранение/получение данных на флэш. Хранить в памяти последовательно все дампы карт и время отметки.
21) ПОСЛЕ ММБ!!! продумать систему сообщения пользователю об ошибках (писки и мигания светодиодом).
	- светодиод горит во время работы с картой и показает по завершению. Короткий писк (<0.5 сек.) раздается при окончании работы.
	- любая ошибка - длинный писк 2 секунды
22) ПОСЛЕ ММБ!!! сделать чтение RFID по прерыванию (а надо ли?) - займет 1 ногу и не будет постоянного опроса RFID-модуля


Формат кадра
[0] 0xFE
[1] 0xFE
[2] 0xFE
[3] station#
[4] data_length(n)
[5] command
[6] data[0]
... data[n-1]
[n] CRC8

//изменение режима станции
setMode()
	0: новый номер режима
	ответ
	0: код ошибки

//установка часов станции
setTime()
	0-5: дата и время [yy.mm.dd hh:mm:ss]
	ответ
	0: код ошибки
	1-4: текущее время

//сброс данных станции
resetStation()
	0-1: кол-во отмеченных карт  (для проверки)
	2-5: время последней отметки  (для проверки)
	6: новый номер станции
	ответ
	0: код ошибки

//текущее состояние станции
getStatus()
	ответ
	0: код ошибки
	1: версия прошивки
	2: номер режима
	3-6: текущее время
	7-8: количество отметок на станции
	9-12: время последней отметки на станции
	13-14: напряжение батареи в условных единицах [0..1023] ~ [0..1.1В]
	15-16: температура чипа DS3231 (чуть выше окружающей среды)
	//15-18: емкость флэш-памяти

//обнулить чип и подготовить для выдаче команде
initChip()
	0-1: номер команды
	2-3: маска участников
	//ПОСЛЕ ММБ!!! 4-11: UID чипа
	ответ
	0: код ошибки
	1-4: время инициализации
	5-12: UID чипа


//получить данные последней отметившейся команды
getLastTeam()
	ответ
	0: код ошибки
	1-2: номер команды
	3-6: время инициализации
	7-8: маска команды	
	9-12: время последней отметки на станции

//получить записи об отметившихся командах из памяти станции
getChipHistory() - адовый код. подозреваю, что нерабочий совсем
	0-1: #записи
	ответ
	0: код ошибки
	1-2: номер команды
	3-6: время инициализации
	7-8: маска команды	
	9-12: время последней отметки на станции

//постранично получить данные с карты
readCardPage()
	0: с какой страницы карты
       	1: по какую страницу карты включительно
	ответ
	0: код ошибки
	1-8: UID чипа
	9: номер страницы
	10-13: данные из страницы карты (4 байта)
	14: номер страницы
	15-18: данные из страницы карты (4 байта)
	...и т.д.

обновить маску команды
updateTeamMask()
        0-1: номер команды (для проверки)
	2-5: время выдачи чипа (для проверки)
	6-7: маска участников
	//ПОСЛЕ ММБ!!! 8-15: UID чипа (для проверки)
	ответ
	0: код ошибки

//постранично записать данные на карту
writeCardPage()
	0-7: UID чипа (для проверки)
	8: номер страницы
	9-12: данные для записи (4 байта)
	ответ
	0: код ошибки

//получить данные об отметившихся командах их флэша
readFlash()
	0-3: адрес начала чтения
	4-7: адрес конца чтения
	ответ
	0: код ошибки
	1...: данные из флэша

//записать данные на флэш
writeFlash()
	0-3: адрес начала записи
	4...: данные для записи
	ответ
	0: код ошибки
	1: кол-во записанных байт (для проверки)
